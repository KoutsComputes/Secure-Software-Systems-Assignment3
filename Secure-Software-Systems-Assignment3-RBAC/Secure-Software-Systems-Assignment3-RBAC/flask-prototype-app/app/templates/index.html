{% extends 'base.html' %}
{% block content %}
  <section class="hero">
    <div class="hero-badge">Secure election sandbox</div>
    <h1>Electronic Voting Prototype</h1>
    <p>Reliably demonstrate enrolment, candidate management, and voting flows with strong authentication, encryption, and audit diagnostics.</p>
    <div class="hero-actions">
      {% if session.get('user_id') %}
        <a class="btn" href="{{ url_for('secure_vote') }}">Launch Secure Vote</a>
        <a class="btn-ghost" href="{{ url_for('dashboard_root') }}">Open Role Dashboard</a>
      {% else %}
        <a class="btn" href="{{ url_for('auth_login') }}">Sign In</a>
        <a class="btn-ghost" href="{{ url_for('auth_register') }}">Create Account</a>
      {% endif %}
    </div>
    <div class="hero-points">
      <span>End-to-end encrypted ballots</span>
      <span>Role-based access controls</span>
      <span>Real-time integrity diagnostics</span>
    </div>
  </section>

  <section class="grid-3">
    <div class="card">
      <h2>Voter Enrolment</h2>
      <div class="links">
        <a class="btn" href="{{ url_for('register_voter') }}">Register (AEC)</a>
        <a class="btn" href="{{ url_for('check_enrolment') }}">Check Enrolment</a>
        <a class="btn" href="{{ url_for('self_enrol') }}">Self Enrol</a>
        <a class="btn" href="{{ url_for('update_address') }}">Update Address</a>
        {% if user_role in ['clerk', 'admin'] %}
        <a class="btn btn-secondary" href="{{ url_for('voters') }}">View Voters</a>
        {% endif %}
      </div>
    </div>
    <div class="card">
      <h2>Candidates</h2>
      <div class="links">
        {% if user_role in ['clerk', 'admin'] %}
        <a class="btn" href="{{ url_for('add_candidate') }}">Add Candidate</a>
        {% endif %}
        <a class="btn" href="{{ url_for('candidates') }}">View Candidates</a>
      </div>
    </div>
    <div class="card">
      <h2>Voting</h2>
      <div class="links">
        <a class="btn" href="{{ url_for('vote') }}">Vote (In-country)</a>
        <a class="btn" href="{{ url_for('vote_overseas') }}">Vote (Overseas)</a>
      </div>
    </div>
  </section>

  <section class="grid-2">
    <div class="card">
      <h2>Results</h2>
      <div class="links">
        <a class="btn" href="{{ url_for('results') }}">Results</a>
        {% if user_role in ['clerk','admin'] %}
        <a class="btn" href="{{ url_for('recount') }}">Recount</a>
        {% endif %}
        {% if user_role == 'admin' %}
        <a class="btn" href="{{ url_for('import_scanned') }}">Import Scanned</a>
        {% endif %}
        <a class="btn btn-secondary" href="{{ url_for('api_results') }}" target="_blank">JSON API</a>
      </div>
    </div>
    {% if encryption_diagnostics_enabled and user_role == 'admin' %}
    <div class="card">
      <h2>Encryption Diagnostics</h2>
      <p>Verify AES ballot confidentiality directly from the UI.</p>
      <div class="links">
        <a class="btn" href="{{ url_for('encryption_diagnostics') }}">Encryption Check</a>
      </div>
    </div>
    {% endif %}
  </section>
{% endblock %}
