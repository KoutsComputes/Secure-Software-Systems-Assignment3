{% extends 'base.html' %}
{% block content %}
  <!-- Theo: Issue 8 - Styled Admin: Manage User Roles -->
  <section class="grid-2">
    <div class="card form-card">
      <h2>Manage User Roles</h2>
      <p class="muted">Change roles for existing users. Use Accounts to create/delete.</p>
      <table class="table">
        <tr>
          <th>Username</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
        {% for u in users %}
        <tr>
          <td>{{ u.username }}</td>
          <td>{{ u.role }}</td>
          <td>
            <form method="post" class="inline-form">
              <input type="hidden" name="username" value="{{ u.username }}">
              <div class="field">
                <select name="role">
                  {% for r in roles %}
                  <option value="{{ r.name }}" {% if r.name == u.role %}selected{% endif %}>{{ r.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="actions">
                <button class="btn" type="submit">Change</button>
              </div>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>
      <div class="actions">
        <a class="btn btn-secondary" href="{{ url_for('dashboard_admin') }}">Back</a>
        <a class="btn" href="{{ url_for('admin_accounts') }}">Manage Accounts</a>
      </div>
    </div>
  </section>
{% endblock %}

